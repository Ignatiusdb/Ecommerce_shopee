<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Banner Management</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/stylesheets/assets/imgs/theme/favicon.svg">
    <!-- Template CSS -->
    <link href="/stylesheets/assets/css/main.css" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/banner/bannerStyle.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajaxy/1.6.1/scripts/jquery.ajaxy.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"
        integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>



    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajaxy/1.6.1/scripts/jquery.ajaxy.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>



</head>

<body>
    <div class="screen-overlay"></div>

    <div class="page-wrapper">
        <aside class="navbar-aside" id="offcanvas_aside">
            <div class="aside-top">
                <a href="admin/dashboard" class="brand-wrap">
                    <img src="\stylesheets\assets\imgs\brands\brand-20.jpg" class="logo" alt="Evara Dashboard">
                </a>
                <div>
                    <button class="btn btn-icon btn-aside-minimize"> <i
                            class="text-muted material-icons md-menu_open"></i> </button>
                </div>
            </div>
            <nav>
                <ul class="menu-aside">
                    
                        <a class="menu-link" href="admin/dashboard"> <i class="icon material-icons md-home"></i>
                            <span class="text">Dashboard</span>
                        </a>
                    </li>
                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="page-products-list.ejs"> <i
                                class="icon material-icons md-shopping_bag"></i>
                            <span class="text">Products</span>
                        </a>
                        <div class="submenu">
                            <a href="/admin/product-management">Product List</a>
                            <!-- <a href="page-products-grid.ejs">Product grid</a>
                            <a href="page-products-grid-2.ejs">Product grid 2</a> -->
                            <a href="/admin/category-management">Categories</a>
                        </div>
                    </li>
                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="page-orders-1.html"> <i class="icon material-icons md-shopping_cart"></i>
                            <span class="text">Orders</span>
                        </a>
                        <div class="submenu">
                            <a href="/admin/order-management">Orders </a>
                        </div>
                    </li>
                    <li class="menu-item has-submenu">
                        <li class="menu-item active"></li>
                        <a class="menu-link" href="page-orders-1.html"> <i class="icon material-icons md-stars"></i>
                            <span class="text">Banner</span>
                        </a>
                        <div class="submenu">
                            
                            <a href="/admin/banner-management">Banner Management </a>
                        </div>
                    </li>
                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="page-sellers-cards.html"> <i class="icon material-icons md-store"></i>
                            <span class="text">Users</span>
                        </a>
                        <div class="submenu">
                            <a href="/admin/users">Users list</a>
    
                        </div>
                    </li>
                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="page-sellers-cards.html"> <i class="icon material-icons md-person"></i>
                            <span class="text">Coupons</span>
                        </a>
                        <div class="submenu">
                            <a href="/admin/coupon-management">Coupon</a>
    
                        </div>
                    </li>
                   
                    <!-- <li class="menu-item has-submenu">
                        <a class="menu-link" href="page-form-product-1.ejs"> <i class="icon material-icons md-add_box"></i>
                            <span class="text">Add product</span>
                        </a>
                        
                        <div class="submenu">
                            <a href="page-form-product-1.ejs">Add product 1</a>
                            <a href="/admin/addProduct">Add product</a>
                            <a href="page-form-product-3.ejs">Add product 3</a>
                            <a href="page-form-product-4.ejs">Add product 4</a>
                        </div>
                    </li> -->
                    <!-- <li class="menu-item has-submenu">
                        <a class="menu-link" href="page-transactions-1.html"> <i class="icon material-icons md-monetization_on"></i>
                            <span class="text">Transactions</span>
                        </a>
                        <div class="submenu">
                            <a href="page-transactions-1.html">Transaction 1</a>
                            <a href="page-transactions-2.html">Transaction 2</a>
                            <a href="page-transactions-details.html">Transaction Details</a>
                        </div>
                    </li> -->
                    <!-- <li class="menu-item has-submenu">
                        <a class="menu-link" href="#"> <i class="icon material-icons md-person"></i>
                            <span class="text">Account</span>
                        </a>
                        <div class="submenu">
                            <a href="page-account-login.html">User login</a>
                            <a href="page-account-register.html">User registration</a>
                            <a href="page-error-404.ejs">Error 404</a>
                        </div>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="page-reviews.html"> <i class="icon material-icons md-comment"></i>
                            <span class="text">Reviews</span>
                        </a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="page-brands.html"> <i class="icon material-icons md-stars"></i>
                            <span class="text">Brands</span> </a>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" disabled href="#"> <i class="icon material-icons md-pie_chart"></i>
                            <span class="text">Statistics</span>
                        </a>
                    </li> -->
                </ul>
                <hr>
                <ul class="menu-aside">
                    <li class="menu-item has-submenu">
                        <a class="menu-link" href="#"> <i class="icon material-icons md-settings"></i>
                            <span class="text">Settings</span>
                        </a>
                        <div class="submenu">
                            <a href="page-settings-1.html">Setting sample 1</a>
                            <a href="page-settings-2.html">Setting sample 2</a>
                        </div>
                    </li>
                    <li class="menu-item">
                        <a class="menu-link" href="page-blank.html"> <i class="icon material-icons md-local_offer"></i>
                            <span class="text"> Starter page </span>
                        </a>
                    </li>
                </ul>
                <br>
                <br>
            </nav>
        </aside>
        <div class="main-container">
            <main class="main-wrap">
                <header class="main-header navbar">
                    <div class="col-search">
                        <!-- <form class="searchform">
                            <div class="input-group">
                                <input list="search_terms" type="text" class="form-control" placeholder="Search term">
                                <button class="btn btn-light bg" type="button"> <i
                                        class="material-icons md-search"></i></button>
                            </div>
                            <datalist id="search_terms">
                                <option value="Products">
                                <option value="New orders">
                                <option value="Apple iphone">
                                <option value="Ahmed Hassan">
                            </datalist>
                        </form> -->
                    </div>
                    <div class="col-nav">
                        <!-- <button class="btn btn-icon btn-mobile me-auto" data-trigger="#offcanvas_aside"> <i
                                class="material-icons md-apps"></i> </button>
                        <ul class="nav">
                            <li class="nav-item">
                                <a class="nav-link btn-icon" href="#">
                                    <i class="material-icons md-notifications animation-shake"></i>
                                    <span class="badge rounded-pill">3</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link btn-icon darkmode" href="#"> <i
                                        class="material-icons md-nights_stay"></i> </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="requestfullscreen nav-link btn-icon"><i
                                        class="material-icons md-cast"></i></a>
                            </li>
                            <li class="dropdown nav-item">
                                <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownLanguage"
                                    aria-expanded="false"><i class="material-icons md-public"></i></a>
                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownLanguage">
                                    <a class="dropdown-item text-brand" href="#"><img src="/imgs/theme/flag-us.png"
                                            alt="English">English</a>
                                    <a class="dropdown-item" href="#"><img src="/stylesheets/imgs/theme/flag-fr.png"
                                            alt="Français">Français</a>
                                    <a class="dropdown-item" href="#"><img src="/stylesheets/imgs/theme/flag-jp.png"
                                            alt="Français">日本語</a>
                                    <a class="dropdown-item" href="#"><img src="/stylesheets/imgs/theme/flag-cn.png"
                                            alt="Français">中国人</a>
                                </div>
                            </li> -->
                            <li class="dropdown nav-item">
                                <a class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount"
                                    aria-expanded="false"> <img class="img-xs rounded-circle"
                                        src="/stylesheets/assets/imgs/people/avatar2.jpg" alt="User"></a>
                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">
                                    <!-- <a class="dropdown-item" href="#"><i
                                            class="material-icons md-perm_identity"></i>Edit Profile</a>
                                    <a class="dropdown-item" href="#"><i class="material-icons md-settings"></i>Account
                                        Settings</a>
                                    <a class="dropdown-item" href="#"><i
                                            class="material-icons md-account_balance_wallet"></i>Wallet</a>
                                    <a class="dropdown-item" href="#"><i
                                            class="material-icons md-receipt"></i>Billing</a>
                                    <a class="dropdown-item" href="#"><i class="material-icons md-help_outline"></i>Help
                                        center</a> -->
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item text-danger" href="/admin/logout"><i
                                            class="material-icons md-exit_to_app"></i>Logout</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </header>
                <div class="main-container">


                    <div
                        class="d-flex ms-4 me-4 justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h3 class="h3 text-primary">Banner Management</h3>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <div class="btn-group me-2">
                                <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal"
                                    data-bs-target="#createBannerModal">
                                    + Add Banner
                                </button>
                            </div>

                        </div>
                    </div>

                    <!-- Modal for creating a banners -->
                    <div class="modal fade" id="createBannerModal" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Create Banner</h5>
                                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <!-- Banner creation form -->
                                    <form id="createBannerForm" enctype="multipart/form-data">
                                        <div class="mb-3">
                                            <label for="bannerTitle" class="form-label">Title</label>
                                            <input type="text" class="form-control" id="bannerTitle" name="title"
                                                required>
                                            <small class="text-danger" id="titleValidationMessage"></small>
                                        </div>
                                        <div class="mb-3">
                                            <label for="bannerImage" class="form-label">Banner Image</label>
                                            <input type="file" class="form-control" id="bannerImage" name="image"
                                                accept=".jpg, .jpeg, .png, .gif, .webp" required>
                                            <small class="text-danger" id="imageValidationMessage"></small>
                                        </div>
                                        <div class="mb-3">
                                            <label for="bannerDescription" class="form-label">Description</label>
                                            <textarea class="form-control" id="bannerDescription"
                                                name="description"></textarea>
                                            <small class="text-danger" id="descriptionValidationMessage"></small>
                                        </div>
                                        <div class="mb-3">
                                            <label for="bannerLink" class="form-label">Link To Navigate</label>
                                            <input type="text" class="form-control" id="bannerLink" name="link"
                                                required>
                                            <small class="text-danger" id="linkValidationMessage"></small>
                                        </div>
                                        <div class="mb-3">
                                            <label for="bannerPosition" class="form-label">Postiton to appear</label>
                                            <input type="number" class="form-control" id="bannerPosition"
                                                name="position" required>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Create</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>


                    <section class="light">
                        <div class="container py-2">
                            <!-- <div class="h1 text-center text-dark" id="pageHeaderTitle">My Cards Light</div> -->

                            <% banners?.forEach((item)=> {%>
                                <article class="postcard light blue">
                                    <a class="postcard__img_link" href="#">
                                        <img class="postcard__img" src="/<%= item.image %>" alt="Image Title" />
                                    </a>
                                    <div class="postcard__text t-dark">
                                        <h1 class="postcard__title red"><a href="#">
                                                <%= item.title %>
                                            </a></h1>
                                        <div class="postcard__subtitle small">

                                        </div>
                                        <div class="postcard__bar"></div>
                                        <div class="postcard__preview-txt">
                                            <%= item.description %>
                                        </div>
                                        <div class="postcard__subtitle">Position to Appear : <%= item.position %>
                                        </div>
                                        <ul class="postcard__tagbox">
                                            <li>
                                                <button class="btn btn-success btn-sm rounded-0 me-3 edit-button"
                                                    type="button" data-toggle="modal"
                                                    data-target="#editModal<%= item._id %>" data-id="<%= item._id %>"
                                                    title="Edit"><i class="fa fa-edit"></i></button>
                                            </li>
                                            <li>
                                                <button class="btn btn-danger btn-sm rounded-0" type="button"
                                                    data-toggle="tooltip" data-placement="top" title=""
                                                    onclick="deleteBanner('<%= item._id %>')"><i
                                                        class="fa fa-trash"></i></button>
                                            </li>
                                            <li>
                                                <button class="btn bg-white btn-sm rounded-0 toggle-button ms-4"
                                                    type="button" data-toggle="tooltip" data-placement="top"
                                                    title=""
                                                    onclick="toggleBanner('<%= item._id %>','<%= item.isActive  %>')">
                                                    <i id="toggleIcon<%= item._id %>"
                                                        class="fa <%= item.isActive ? 'fa-toggle-on active' : 'fa-toggle-off inactive' %>"></i>
                                                </button>
                                            
                                            </li>
                                        </ul>
                                        <!-- The Edit Modal -->
                                        <div class="modal fade" id="editModal<%= item._id %>" tabindex="-1"
                                            role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <!-- Modal Header -->
                                                    <div class="modal-header">
                                                        <h4 class="modal-title" id="editModalLabel">Edit Banner Details
                                                        </h4>
                                                        <button type="button" class="close"
                                                            data-dismiss="modal">&times;</button>
                                                    </div>
                                                    <!-- Modal body -->
                                                    <div class="modal-body">
                                                        <!-- Include a form here to edit the details -->
                                                        <!-- You can use text inputs, textareas, etc. -->
                                                        <form action="" id="<%= item._id %>"
                                                            enctype="multipart/form-data">
                                                            <div class="mb-3">
                                                                <label for="EditbannerTitle_<%= item._id %>"
                                                                    class="form-label">Title</label>
                                                                <input type="text" class="form-control"
                                                                    id="EditbannerTitle_<%= item._id %>" name="title"
                                                                    value="<%= item.title %>" required>
                                                                <small class="text-danger"
                                                                    id="EdittitleValidationMessage"></small>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label for="EditbannerImage_<%= item._id %>"
                                                                    class="form-label">Banner Image</label>
                                                                <br>
                                                                <div class="border-2 mt-1 "
                                                                    style=" background:grey;position: relative;width: 49px; height: 48px ;">
                                                                    <img src="/<%= item.image %>"
                                                                        alt="<%= item.name %> Image"
                                                                        style="width: 45px; height: 45px ;position:relative; margin-top:2px ;margin-left:2px">
                                                                </div>

                                                                <br>
                                                                <input type="file" class="form-control"
                                                                    id="EditbannerImage_<%= item._id %>" name="image"
                                                                    accept=".jpg, .jpeg, .png, .gif, .webp">
                                                                <small class="text-danger"
                                                                    id="EditimageValidationMessage"></small>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label for="EditbannerDescription_<%= item._id %>"
                                                                    class="form-label">Description</label>
                                                                <textarea class="form-control"
                                                                    id="EditbannerDescription_<%= item._id %>"
                                                                    name="description"><%= item.description %></textarea>
                                                                <small class="text-danger"
                                                                    id="EditdescriptionValidationMessage"></small>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label for="EditbannerLink_<%= item._id %>"
                                                                    class="form-label">Link To Navigate</label>
                                                                <input type="text" class="form-control"
                                                                    id="EditbannerLink_<%= item._id %>" name="link"
                                                                    value="<%= item._link %>" required>
                                                                <small class="text-danger"
                                                                    id="EditlinkValidationMessage"></small>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label for="EditbannerPosition_<%= item._id %>"
                                                                    class="form-label">Postiton to appear</label>
                                                                <input type="number" class="form-control"
                                                                    id="EditbannerPosition_<%= item._id %>"
                                                                    name="position" value="<%= item.position %>"
                                                                    required>
                                                            </div>


                                                    </div>
                                                    <!-- Modal footer -->
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-primary"
                                                            onclick="onclickForm('<%= item._id %>')"
                                                            id="editSubmitButton">Save Changes</button>
                                                        <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">Close</button>

                                                    </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- JavaScript to initialize the tooltip -->
                                        <script>
                                            $(document).ready(function () {
                                                $('[data-toggle="tooltip"]').tooltip();
                                            });
                                        </script>
                                    </div>
                                </article>
                                <% }) %>
                        </div>
                    </section>
                </div>
        </div>




        <script>

            //Banner Creation
            const CreateBanner = document.getElementById("createBannerForm");

            //Validation 
            const titleInput = document.getElementById('bannerTitle');
            const imageInput = document.getElementById('bannerImage');
            const descriptionInput = document.getElementById('bannerDescription');
            const linkInput = document.getElementById('bannerLink');
            const titleValidationMessage = document.getElementById('titleValidationMessage');
            const imageValidationMessage = document.getElementById('imageValidationMessage');
            const descriptionValidationMessage = document.getElementById('descriptionValidationMessage');
            const linkValidationMessage = document.getElementById('linkValidationMessage');

            CreateBanner.addEventListener('submit', (e) => {
                e.preventDefault();

                // Custom validation logic
                let isValid = true;
                // Validate title length (minimum 5 characters)
                if (titleInput.value.length < 5) {
                    titleValidationMessage.textContent = 'Title must be at least 5 characters';
                    isValid = false;
                } else {
                    titleValidationMessage.textContent = '';
                }

                // Validate description presence
                if (!descriptionInput.value.trim()) {
                    descriptionValidationMessage.textContent = 'Description is required';
                    isValid = false;
                } else {
                    descriptionValidationMessage.textContent = '';
                }

                // Validate image format

                const allowedImageFormats = ['.jpg', '.jpeg', '.png', '.gif', '.webp'];
                const imageFileName = imageInput.value.toLowerCase();
                if (!allowedImageFormats.some(format => imageFileName.endsWith(format))) {
                    imageValidationMessage.textContent = 'Invalid image format. Supported formats: JPG, PNG, GIF';
                    isValid = false;
                } else {
                    imageValidationMessage.textContent = '';
                }

                // Validate URL format (optional)
                const linkRegex = /^(ftp|http|https):\/\/[^ "]+$/;
                if (linkInput.value && !linkRegex.test(linkInput.value)) {
                    linkValidationMessage.textContent = 'Invalid URL format';
                    isValid = false;
                } else {
                    linkValidationMessage.textContent = '';
                }

                if (isValid) {
                    // Create banner object and send to the server
                    const formData = new FormData(CreateBanner);

                    fetch('/admin/banner-management/create', {
                        method: 'POST',
                        body: formData
                    })
                        .then(response => response.json())

                        .then(data => {
                            if (data.status === 201) {
                                // Show a success message with SweetAlert
                                Swal.fire({
                                    title: 'Success!',
                                    text: data.message,
                                    icon: 'success',
                                }).then(() => {
                                    // Close the modal
                                    $('#createBannerModal').modal('hide');
                                    window.location.reload()
                                    // Reload or update the banner list on the page
                                });
                            } else {
                                // Show an error message with SweetAlert
                                Swal.fire({
                                    title: 'Error!',
                                    text: data.message,
                                    icon: 'error',
                                });
                            }
                        })
                        .catch(error => {
                            console.error('Error creating banner:', error);
                            // Handle the error (e.g., show an error message)
                            console.error('Error creating banner:', error);
                            // Show an error message with SweetAlert
                            Swal.fire({
                                title: 'Error!',
                                text: 'An error occurred while creating the banner.',
                                icon: 'error',
                            });
                        });
                }
            })


            //Edit Banners
            //Edit Banners

            let selectedItemId = null;
            const editButton = document.querySelectorAll('.edit-button');

            for (const button of editButton) {
                button.addEventListener('click', () => {
                    selectedItemId = button.getAttribute('data-id');
                    console.log(selectedItemId + 'ggggg');
                });
            }


            // Access form elements here using `selectedItemId`

            function onclickForm(selectedItemId) {

                const EdittitleInput = document.getElementById('EditbannerTitle_' + selectedItemId);
                const EditimageInput = document.getElementById('EditbannerImage_' + selectedItemId);
                const EditdescriptionInput = document.getElementById('EditbannerDescription_' + selectedItemId);
                const EditlinkInput = document.getElementById('EditbannerLink_' + selectedItemId);
                const Position = document.getElementById('EditbannerPosition_' + selectedItemId);
                const submit = document.getElementById('editSubmitButton');

                // Implement your form validation logic here.
                let isValid = validateForm(EdittitleInput, EditdescriptionInput, EditlinkInput, Position);

                if (isValid) {
                    const formData = new FormData();
                    formData.append('title', EdittitleInput.value);
                    formData.append('description', EditdescriptionInput.value);
                    formData.append('image', EditimageInput.files[0]);
                    formData.append('link', EditlinkInput.value);
                    formData.append('position', Position.value);
                    console.log(formData);

                    fetch('/admin/banner-management/edit/' + selectedItemId, {
                        method: 'PUT',
                        body: formData, // Send the FormData object
                    })
                        .then(response => response.json())
                        .then(data => {
                            if (data.status === 201) {
                                // Show success message
                                Swal.fire({
                                    title: 'Success!',
                                    text: 'Banner Edit Successfully',
                                    icon: 'success',
                                }).then(() => {
                                    // Close the modal
                                    $('#createBannerModal').modal('hide');
                                    // Reload the banner list on the page
                                    selectedItemId = null;
                                    window.location.reload();
                                });
                            } else {
                                // Show an error message
                                Swal.fire({
                                    title: 'Error!',
                                    text: data.message || 'An error occurred while editing the banner.',
                                    icon: 'error',
                                });
                            }
                        })
                        .catch(error => {
                            console.error('Error editing banner:', error);
                            // Show a more specific error message
                            Swal.fire({
                                title: 'Error!',
                                text: 'An error occurred while editing the banner.',
                                icon: 'error',
                            });
                        });
                } else {
                    console.log('Form validation failed.');
                }
            }

            function validateForm(EdittitleInput, EditdescriptionInput, EditlinkInput, Position) {
                const EdittitleValidationMessage = document.getElementById('EdittitleValidationMessage');
                const EditimageValidationMessage = document.getElementById('EditimageValidationMessage');
                const EditdescriptionValidationMessage = document.getElementById('EditdescriptionValidationMessage');
                const EditlinkValidationMessage = document.getElementById('EditlinkValidationMessage');

                // Initialize validation messages as empty
                EdittitleValidationMessage.textContent = '';
                EditimageValidationMessage.textContent = '';
                EditdescriptionValidationMessage.textContent = '';
                EditlinkValidationMessage.textContent = '';

                // You can check if the inputs are not empty or if the file input contains a valid image.
                // Return true if valid, false otherwise.
                let isValid = true;

                // Validate title length
                if (EdittitleInput.value.length < 5) {
                    EdittitleValidationMessage.textContent = 'Title must be at least 5 characters';
                    isValid = false;
                }

                // Validate description presence
                if (!EditdescriptionInput.value.trim()) {
                    EditdescriptionValidationMessage.textContent = 'Description is required';
                    isValid = false;
                }

                // Validate image format (if EditimageInput is present)


                // Validate URL format (optional)
                const linkRegex = /^(ftp|http|https):\/\/[^ "]+$/;
                if (EditlinkInput.value && !linkRegex.test(EditlinkInput.value)) {
                    EditlinkValidationMessage.textContent = 'Invalid URL format';
                    isValid = false;
                }

                return isValid;
            }

            //DELETE PRODUCTS
            function deleteBanner(bannerId) {
                console.log("Delete product Called")
                Swal.fire({
                    title: 'Confirmation',
                    text: 'Are you sure you want to delete this Banner?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, delete it!',
                    cancelButtonText: 'No, cancel',
                }).then((result) => {
                    if (result.isConfirmed) {
                        // User confirmed, proceed with deletion
                        confirmDeleteBanner(bannerId);
                    }
                });
            }

            function confirmDeleteBanner(bannerId) {
                fetch('/admin/banner-management/delete/' + bannerId, {
                    method: "DELETE",

                }).then((response) => response.json())
                    .then(data => {
                        if (data.status === 201) {
                            // Show a success message with SweetAlert
                            Swal.fire({
                                title: 'Success!',
                                text: 'Banner Deleted Sucessfully',
                                icon: 'success',
                            }).then(() => {
                                // Close the modal
                                $('#createBannerModal').modal('hide');
                                window.location.reload()
                                // Reload or update the banner list on the page
                            });
                        } else {
                            // Show an error message with SweetAlert
                            Swal.fire({
                                title: 'Error!',
                                text: data.message,
                                icon: 'error',
                            });
                        }
                    })
                    .catch(error => {
                        console.error('Error creating banner:', error);
                        // Handle the error (e.g., show an error message)
                        console.error('Error creating banner:', error);
                        // Show an error message with SweetAlert
                        Swal.fire({
                            title: 'Error!',
                            text: 'An error occurred while creating the banner.',
                            icon: 'error',
                        });
                    });
            }
            function toggleBanner(bannerId, status) {
                console.log(bannerId, status);

                fetch(`/admin/banner-management/change-status/${bannerId}?status=${status}`, {
                    method: 'PUT',
                }).then((response) => {
                    return response.json();
                }).then((res) => {
                    const toggleIcon = document.getElementById('toggleIcon' + bannerId);

                    if (res.bannerStatus) {
                        toggleIcon.classList.remove('fa-toggle-off', 'inactive');
                        toggleIcon.classList.add('fa-toggle-on', 'active');
                    } else {
                        toggleIcon.classList.remove('fa-toggle-on', 'active');
                        toggleIcon.classList.add('fa-toggle-off', 'inactive');
                    }
                }).catch(() => {
                    Swal.fire({
                        title: "Failed to change status",
                        text: "Please try again later.",
                        icon: "warning"
                    });
                });
            }

        </script>


        <!-- Page wrapper end -->

        <!-- *************
			************ Required JavaScript Files *************
		************* -->
        <!-- Required jQuery first, then Bootstrap Bundle JS -->
        <script src="/stylesheets/assets/js/jquery.min.js"></script>
        <script src="/stylesheets/assets/js/bootstrap.bundle.min.js"></script>
        <script src="/stylesheets/assets/js/modernizr.js"></script>
        <script src="/stylesheets/assets/js/moment.js"></script>

        <!-- *************
			************ Vendor Js Files *************
		************* -->

        <!-- Overlay Scroll JS -->
        <script src="/stylesheets/assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
        <script src="/stylesheets/assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

        <!-- Apex Charts -->
        <script src="/stylesheets/assets/vendor/apex/apexcharts.min.js"></script>
        <script src="/stylesheets/assets/vendor/apex/custom/ecommerce/orders-visits.js"></script>
        <script src="/stylesheets/assets/vendor/apex/custom/ecommerce/visitors.js"></script>
        <script src="/stylesheets/assets/vendor/apex/custom/ecommerce/customers.js"></script>

        <!-- jQcloud Keywords -->
        <script src="/stylesheets/assets/vendor/tagsCloud/tagsCloud.js"></script>

        <!-- Vector Maps -->
        <script src="/stylesheets/assets/vendor/jvectormap/jquery-jvectormap-2.0.5.min.js"></script>
        <script src="/stylesheets/assets/vendor/jvectormap/world-mill-en.js"></script>
        <script src="/stylesheets/assets/vendor/jvectormap/gdp-data.js"></script>
        <script src="/stylesheets/assets/vendor/jvectormap/custom/world-map-markers2.js"></script>

        <!-- Main Js Required -->
        <script src="/stylesheets/assets/js/main.js"></script>

</body>


</html>